# GraphRAG 個人化地端知識管理 UI 設計規範

> **專案定位**: 個人化、地端的知識管理支援系統
> 
> **設計原則**: 基於現有支援能力，聚焦核心功能，避免過度設計
> 
> 更新日期：2026-01-11

## 🎯 **專案定位與範圍**

### **核心定位**
```yaml
目標用戶: 個人知識工作者、研究人員、小團隊
使用場景: 本地文檔管理、知識圖譜構建、智能檢索
核心價值: 隱私保護、零成本、完全控制

技術特色:
  - 100% 本地運行 (無雲端依賴)
  - 零 API 費用 (LMStudio 本地 LLM)
  - 完整數據控制 (企業級隱私)
  - 生產穩定 (無限循環已修復)
```

### **設計範圍界定**
```yaml
包含功能 (MVP):
  ✅ 文本文件管理 (.txt)
  ✅ 結構化數據 (.csv) 
  ✅ 知識圖譜視覺化
  ✅ 智能查詢檢索
  ✅ 索引進度監控

排除功能 (V2):
  ❌ 多格式轉換 (PDF/DOCX)
  ❌ 多用戶權限管理
  ❌ 雲端同步功能
  ❌ 企業級部署
  ❌ 複雜工作流程
```

## 🏗️ **簡化架構設計**

### **雙應用架構** (簡化版)
```
┌─────────────────┐    ┌─────────────────┐
│   Core API      │    │  Desktop UI     │
│   (FastAPI)     │◄──►│   (React)       │
│   - GraphRAG    │    │   - 文檔管理     │
│   - LMStudio    │    │   - 圖譜視覺化   │
│   - 本地存儲     │    │   - 查詢介面     │
└─────────────────┘    └─────────────────┘
```

**架構簡化理由**:
- 個人使用無需複雜分離
- 降低開發複雜度
- 減少維護成本
- 提升用戶體驗一致性

## 📱 **UI 設計範圍**

### **主要功能模組**
```yaml
1. 文檔管理模組:
   - 文件上傳 (.txt/.csv)
   - 文件瀏覽器
   - 文件預覽
   - 批次操作

2. 索引管理模組:
   - 索引配置
   - 進度監控
   - 狀態顯示
   - 錯誤處理

3. 知識圖譜模組:
   - 圖譜視覺化
   - 節點互動
   - 社群顯示
   - 佈局控制

4. 查詢檢索模組:
   - 搜尋介面
   - 結果顯示
   - 上下文展示
   - 歷史記錄
```

### **介面設計原則**
```yaml
簡潔性:
  - 單頁應用 (SPA)
  - 最小化導航層級
  - 直觀的操作流程

效率性:
  - 快速文件上傳
  - 即時搜尋回饋
  - 鍵盤快捷鍵

可用性:
  - 響應式設計
  - 清晰的狀態指示
  - 友善的錯誤提示
```

## 🎨 **視覺設計規範**

### **設計語言**
```yaml
風格定位: 現代簡約、專業工具
色彩方案: 
  - 主色: #2563eb (藍色 - 知識)
  - 輔色: #10b981 (綠色 - 成功)
  - 警告: #f59e0b (橙色 - 注意)
  - 錯誤: #ef4444 (紅色 - 錯誤)
  - 背景: #f8fafc (淺灰 - 清潔)

字體系統:
  - 英文: Inter, system-ui
  - 中文: "Noto Sans TC", sans-serif
  - 代碼: "JetBrains Mono", monospace
```

### **組件規範**
```typescript
// 設計系統基礎
const DesignTokens = {
  spacing: {
    xs: '4px',
    sm: '8px', 
    md: '16px',
    lg: '24px',
    xl: '32px'
  },
  
  borderRadius: {
    sm: '4px',
    md: '8px',
    lg: '12px'
  },
  
  shadows: {
    sm: '0 1px 2px rgba(0,0,0,0.05)',
    md: '0 4px 6px rgba(0,0,0,0.07)',
    lg: '0 10px 15px rgba(0,0,0,0.1)'
  }
};
```

## 📋 **功能優先級**

### **P0 (核心功能)** - Week 1-4
```yaml
文檔管理:
  - 文件上傳 (.txt/.csv)
  - 文件列表顯示
  - 基礎文件操作

索引功能:
  - 索引觸發
  - 進度顯示
  - 完成通知

基礎查詢:
  - 文本搜尋
  - 結果列表
  - 簡單過濾
```

### **P1 (重要功能)** - Week 5-6
```yaml
圖譜視覺化:
  - 基礎網絡圖
  - 節點點擊
  - 簡單佈局

進階查詢:
  - 全域/本地搜尋
  - 結果高亮
  - 上下文顯示
```

### **P2 (優化功能)** - Week 7-8
```yaml
用戶體驗:
  - 快捷鍵支援
  - 主題切換
  - 設定保存

效能優化:
  - 虛擬滾動
  - 懶加載
  - 快取機制
```

## 🔧 **技術實現範圍**

### **前端技術棧** (確定)
```yaml
核心框架:
  - React 18 + TypeScript
  - Vite (構建工具)
  - React Router (路由)

UI 組件:
  - Headless UI (無樣式組件)
  - Tailwind CSS (樣式框架)
  - Lucide React (圖標)

圖譜視覺化:
  - D3.js (核心引擎)
  - 自建圖譜組件 (避免過度依賴)

狀態管理:
  - Zustand (輕量狀態)
  - React Query (服務端狀態)
```

### **後端 API** (簡化)
```yaml
核心端點:
  - POST /api/files/upload
  - GET /api/files/list
  - POST /api/index/start
  - GET /api/index/status
  - POST /api/query/search
  - GET /api/graph/data
```

## 📊 **開發工時重估**

### **簡化後工時** (基於現有支援)
```yaml
Phase 1 - 核心 API (Week 1-2): 30h
  - 文件管理 API: 10h
  - 索引管理 API: 10h  
  - 查詢 API 整合: 10h

Phase 2 - 基礎 UI (Week 3-4): 35h
  - React 應用架構: 8h
  - 文檔管理介面: 12h
  - 索引管理介面: 8h
  - 基礎查詢介面: 7h

Phase 3 - 圖譜視覺化 (Week 5-6): 25h
  - D3.js 圖譜引擎: 15h
  - 互動功能: 10h

Phase 4 - 優化整合 (Week 7-8): 20h
  - 效能優化: 8h
  - 用戶體驗: 7h
  - 測試部署: 5h

總計: 110 小時 (8週)
節省: 40 小時 (相比原計劃)
```

## 🎯 **成功指標**

### **功能指標**
```yaml
基礎功能:
  ✅ 支援 .txt/.csv 文件上傳
  ✅ 完成索引建立 (14個 parquet 文件)
  ✅ 實現基礎查詢功能
  ✅ 顯示知識圖譜視覺化

效能指標:
  ✅ 文件上傳 < 5秒 (10MB)
  ✅ 索引完成 < 20分鐘 (中等文檔)
  ✅ 查詢響應 < 2秒
  ✅ 圖譜渲染 < 3秒 (100節點)
```

### **用戶體驗指標**
```yaml
易用性:
  ✅ 新用戶 5分鐘內完成首次索引
  ✅ 直觀的操作流程
  ✅ 清晰的狀態反饋

穩定性:
  ✅ 零崩潰運行
  ✅ 優雅的錯誤處理
  ✅ 數據完整性保證
```

## 📝 **設計決策記錄**

### **關鍵決策**
```yaml
1. 架構簡化:
   決策: 單一 UI 應用 vs 分離式應用
   理由: 個人使用場景，降低複雜度
   
2. 格式支援:
   決策: 僅支援 .txt/.csv vs 多格式轉換
   理由: 基於現有能力，避免過度工程

3. 視覺化選擇:
   決策: D3.js vs 現成圖譜庫
   理由: 更好的客製化能力和效能控制

4. 狀態管理:
   決策: Zustand vs Redux
   理由: 個人應用無需複雜狀態管理
```

---

**總結**: 基於個人化地端知識管理定位，採用簡化架構，聚焦現有支援能力，在 8 週內交付實用的 MVP 版本。

*設計規範版本: v1.0*  
*預估工時: 110 小時 (8週)*  
*目標用戶: 個人知識工作者*
