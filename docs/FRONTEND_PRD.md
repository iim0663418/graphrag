# GraphRAG 個人知識管理系統 - 前端產品需求文檔 (PRD)

> **產品定位**: 個人化地端知識管理桌面應用  
> **技術架構**: React 18 + TypeScript + D3.js + Tailwind CSS  
> **開發模式**: 雛形驅動開發 (Prototype-Driven Development)
> 
> PRD 版本：v1.0  
> 創建日期：2026-01-11

## 🎯 **產品概述**

### **核心價值主張**
```yaml
用戶痛點: 個人文檔散亂，知識難以關聯和檢索
解決方案: 本地知識圖譜構建 + 智能檢索
核心價值: 隱私保護 + 零成本 + 智能關聯
```

### **目標用戶**
- **主要用戶**: 個人知識工作者、研究人員
- **使用場景**: 本地文檔管理、知識整理、智能檢索
- **技術水平**: 中等，能操作桌面應用

## 📱 **功能需求規格**

### **MVP 功能模組** (P0)

#### **1. 文檔管理模組**
```yaml
功能描述: 本地文檔的上傳、管理和預覽

核心功能:
  - 文件拖拽上傳 (.txt/.csv)
  - 文件列表顯示 (名稱、大小、修改時間)
  - 文件預覽 (文本內容展示)
  - 文件刪除確認

交互流程:
  1. 用戶拖拽文件到上傳區域
  2. 系統驗證文件格式 (.txt/.csv)
  3. 顯示上傳進度
  4. 文件添加到列表
  5. 支持點擊預覽內容

UI 組件:
  - FileUploadZone (拖拽上傳區)
  - FileList (文件列表)
  - FilePreview (預覽面板)
  - ProgressBar (上傳進度)
```

#### **2. 索引管理模組**
```yaml
功能描述: GraphRAG 索引的觸發、監控和狀態管理

核心功能:
  - 索引觸發按鈕
  - 實時進度顯示
  - 索引狀態指示 (待處理/進行中/完成/錯誤)
  - 索引結果統計 (實體數、關係數)

交互流程:
  1. 用戶點擊「開始索引」
  2. 系統調用後端 API
  3. 實時顯示進度 (0-100%)
  4. 完成後顯示統計結果
  5. 錯誤時顯示錯誤信息

UI 組件:
  - IndexTrigger (觸發按鈕)
  - ProgressIndicator (進度指示器)
  - StatusBadge (狀態標籤)
  - StatsPanel (統計面板)
```

#### **3. 查詢檢索模組**
```yaml
功能描述: 智能查詢和結果展示

核心功能:
  - 搜索輸入框 (支持中英文)
  - 查詢類型選擇 (全域/本地)
  - 結果列表顯示
  - 結果詳情展示

交互流程:
  1. 用戶輸入查詢關鍵詞
  2. 選擇查詢類型
  3. 點擊搜索或按 Enter
  4. 顯示搜索結果列表
  5. 點擊結果查看詳情

UI 組件:
  - SearchInput (搜索框)
  - QueryTypeSelector (類型選擇器)
  - ResultsList (結果列表)
  - ResultDetail (結果詳情)
```

#### **4. 知識圖譜模組**
```yaml
功能描述: 知識圖譜的視覺化展示和交互

核心功能:
  - 圖譜網絡渲染 (節點+邊)
  - 節點點擊查看詳情
  - 圖譜縮放和拖拽
  - 搜索結果高亮

交互流程:
  1. 系統載入圖譜數據
  2. D3.js 渲染網絡圖
  3. 用戶可縮放、拖拽導航
  4. 點擊節點顯示實體詳情
  5. 搜索時高亮相關節點

UI 組件:
  - GraphCanvas (圖譜畫布)
  - NodeTooltip (節點提示)
  - ZoomControls (縮放控制)
  - GraphLegend (圖例說明)
```

## 🎨 **UI/UX 設計規範**

### **設計系統**
```yaml
色彩方案:
  - 主色: #2563eb (藍色 - 知識)
  - 成功: #10b981 (綠色)
  - 警告: #f59e0b (橙色)
  - 錯誤: #ef4444 (紅色)
  - 背景: #f8fafc (淺灰)
  - 文字: #1f2937 (深灰)

字體系統:
  - 標題: 24px/32px, font-weight: 600
  - 正文: 16px/24px, font-weight: 400
  - 小字: 14px/20px, font-weight: 400
  - 代碼: JetBrains Mono, 14px

間距系統:
  - xs: 4px, sm: 8px, md: 16px
  - lg: 24px, xl: 32px, 2xl: 48px

圓角系統:
  - sm: 4px, md: 8px, lg: 12px
```

### **佈局結構**
```yaml
整體佈局: 左側邊欄 + 主內容區
側邊欄寬度: 280px (可收縮)
主內容區: 自適應寬度
響應式: 768px 以下收縮側邊欄

側邊欄內容:
  - Logo 和標題
  - 導航菜單 (文檔/索引/查詢/圖譜)
  - 狀態指示器
  - 設置入口

主內容區:
  - 頁面標題
  - 功能操作區
  - 內容展示區
  - 狀態欄
```

## 🔧 **技術實現規格**

### **前端技術棧**
```yaml
核心框架:
  - React 18.2+ (函數組件 + Hooks)
  - TypeScript 5.0+ (嚴格模式)
  - Vite 5.0+ (構建工具)

UI 框架:
  - Tailwind CSS 3.4+ (樣式框架)
  - Headless UI 2.0+ (無樣式組件)
  - Lucide React (圖標庫)

圖譜視覺化:
  - D3.js 7.8+ (圖譜渲染)
  - 自建 GraphCanvas 組件

狀態管理:
  - Zustand 4.4+ (全局狀態)
  - React Query 5.0+ (服務端狀態)

路由導航:
  - React Router 6.8+ (客戶端路由)
```

### **組件架構**
```typescript
// 應用結構
src/
├── components/           # 通用組件
│   ├── ui/              # 基礎 UI 組件
│   ├── layout/          # 佈局組件
│   └── common/          # 共用組件
├── features/            # 功能模組
│   ├── documents/       # 文檔管理
│   ├── indexing/        # 索引管理
│   ├── search/          # 查詢檢索
│   └── graph/           # 知識圖譜
├── hooks/               # 自定義 Hooks
├── services/            # API 服務
├── stores/              # 狀態管理
├── types/               # TypeScript 類型
└── utils/               # 工具函數
```

### **API 接口規格**
```typescript
// API 接口定義
interface APIEndpoints {
  // 文檔管理
  uploadFile: 'POST /api/files/upload'
  listFiles: 'GET /api/files/list'
  deleteFile: 'DELETE /api/files/:id'
  
  // 索引管理
  startIndex: 'POST /api/index/start'
  getIndexStatus: 'GET /api/index/status'
  getIndexStats: 'GET /api/index/stats'
  
  // 查詢檢索
  globalSearch: 'POST /api/query/global'
  localSearch: 'POST /api/query/local'
  
  // 圖譜數據
  getGraphData: 'GET /api/graph/data'
  getNodeDetails: 'GET /api/graph/nodes/:id'
}
```

## 📋 **用戶故事 (User Stories)**

### **文檔管理**
```yaml
US-001: 文件上傳
  作為用戶，我希望能拖拽文件到應用中
  以便快速添加需要分析的文檔
  
  驗收標準:
  - 支持 .txt 和 .csv 文件
  - 拖拽區域有明確視覺提示
  - 上傳進度實時顯示
  - 上傳完成後自動添加到列表

US-002: 文件管理
  作為用戶，我希望能查看和管理已上傳的文件
  以便組織我的知識庫
  
  驗收標準:
  - 文件列表顯示名稱、大小、時間
  - 支持文件預覽
  - 支持文件刪除（需確認）
  - 列表支持排序
```

### **索引管理**
```yaml
US-003: 索引觸發
  作為用戶，我希望能一鍵觸發知識圖譜構建
  以便將文檔轉換為可檢索的知識圖譜
  
  驗收標準:
  - 明確的「開始索引」按鈕
  - 索引過程中按鈕變為禁用狀態
  - 實時顯示索引進度
  - 完成後顯示成功提示

US-004: 進度監控
  作為用戶，我希望能看到索引的實時進度
  以便了解處理狀態和預估完成時間
  
  驗收標準:
  - 進度條顯示 0-100% 進度
  - 顯示當前處理階段
  - 預估剩餘時間
  - 錯誤時顯示具體錯誤信息
```

### **查詢檢索**
```yaml
US-005: 智能搜索
  作為用戶，我希望能搜索知識圖譜中的信息
  以便快速找到相關內容
  
  驗收標準:
  - 搜索框支持中英文輸入
  - 支持全域和本地搜索模式
  - 搜索結果按相關性排序
  - 結果包含上下文信息

US-006: 結果展示
  作為用戶，我希望搜索結果清晰易懂
  以便快速找到需要的信息
  
  驗收標準:
  - 結果列表顯示標題和摘要
  - 點擊結果查看詳細內容
  - 高亮搜索關鍵詞
  - 支持結果分頁
```

### **知識圖譜**
```yaml
US-007: 圖譜視覺化
  作為用戶，我希望能看到知識的圖譜結構
  以便理解概念之間的關聯
  
  驗收標準:
  - 圖譜以網絡形式展示
  - 節點大小反映重要性
  - 邊的粗細反映關係強度
  - 支持縮放和拖拽導航

US-008: 交互探索
  作為用戶，我希望能與圖譜進行交互
  以便深入探索知識結構
  
  驗收標準:
  - 點擊節點顯示詳細信息
  - 搜索結果在圖譜中高亮
  - 支持節點篩選和隱藏
  - 提供圖例說明
```

## 🎯 **成功指標 (KPIs)**

### **可用性指標**
```yaml
學習成本:
  - 新用戶 5 分鐘內完成首次文件上傳
  - 10 分鐘內完成首次索引
  - 15 分鐘內完成首次搜索

操作效率:
  - 文件上傳響應時間 < 3 秒
  - 搜索響應時間 < 2 秒
  - 圖譜渲染時間 < 5 秒 (100 節點)

錯誤率:
  - 文件上傳成功率 > 95%
  - 索引完成率 > 90%
  - 搜索成功率 > 98%
```

### **用戶體驗指標**
```yaml
界面友好度:
  - 操作流程直觀，無需說明文檔
  - 錯誤提示清晰具體
  - 狀態反饋及時準確

功能完整度:
  - 支持主要文件格式 (.txt/.csv)
  - 支持中英文搜索
  - 圖譜交互流暢
```

## 📝 **開發里程碑**

### **雛形階段** (Week 1-2)
```yaml
目標: 可演示的基礎雛形

交付物:
  - 基礎 React 應用架構
  - 文檔上傳功能
  - 簡單的文件列表
  - 基礎 UI 組件庫

驗收標準:
  - 能成功上傳 .txt 文件
  - 文件列表正常顯示
  - 基礎樣式符合設計規範
```

### **MVP 階段** (Week 3-4)
```yaml
目標: 功能完整的 MVP

交付物:
  - 索引管理功能
  - 搜索查詢功能
  - 基礎圖譜視覺化
  - 完整的狀態管理

驗收標準:
  - 完整的文檔→索引→搜索流程
  - 基礎圖譜展示
  - 所有核心功能可用
```

---

**PRD 總結**: 基於個人化知識管理定位，聚焦核心功能，採用現代前端技術棧，以雛形驅動的方式快速迭代開發。

*PRD 版本: v1.0*  
*目標用戶: 個人知識工作者*  
*開發週期: 4 週 MVP*
